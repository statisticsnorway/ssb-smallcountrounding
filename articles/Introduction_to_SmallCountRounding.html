<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to 'SmallCountRounding' • SmallCountRounding</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to 'SmallCountRounding'">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SmallCountRounding</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction_to_SmallCountRounding.html">Introduction to 'SmallCountRounding'</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-smallcountrounding/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="Introduction_to_SmallCountRounding_files/kePrint-0.0.1/kePrint.js"></script><link href="Introduction_to_SmallCountRounding_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to 'SmallCountRounding'</h1>
                        <h4 data-toc-skip class="author">Øyvind Langsrud
and Johan Heldal</h4>
            
            <h4 data-toc-skip class="date">2025-02-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-smallcountrounding/blob/master/vignettes/Introduction_to_SmallCountRounding.Rmd" class="external-link"><code>vignettes/Introduction_to_SmallCountRounding.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction_to_SmallCountRounding.Rmd</code></div>
    </div>

    
    
<p><br><br></p>
<div class="section level2">
<h2 id="introductory-example">Introductory example<a class="anchor" aria-label="anchor" href="#introductory-example"></a>
</h2>
<div class="section level3">
<h3 id="example-without-code">Example without code<a class="anchor" aria-label="anchor" href="#example-without-code"></a>
</h3>
<p>First some data to be rounded. <br></p>
<table class="table table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 1</strong>: Original data in tabular form with row and
column totals
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
14
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
9
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3.2em;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
4
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3.2em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
7
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
3
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;" indentlevel="1">
8
</td>
<td style="text-align:right;padding-left: 3.2em;font-weight: bold;font-weight: bold;" indentlevel="1">
27
</td>
</tr>
</tbody>
</table>
<p><br> Some of the inner cells are rounded. Thereafter new totals are
computed. The underlying algorithm tries to keep the values of these
totals close to the original ones. <br></p>
<table class="table table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 2</strong>: All small inner cell values (1-4) are rounded
using 5 as rounding base.
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
16
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
10
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;font-weight: bold;" indentlevel="1">
26
</td>
</tr>
</tbody>
</table>
<p><br> When the inner cells are not going to be published, the number
of cells to be rounded can be limited. <br></p>
<table class="table table table-bordered" style="font-size: 16px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 3</strong>: Assuming only row and column totals to be
published, necessary small inner cell values (1-4) are rounded using 5
as rounding base.
</caption>
<thead><tr>
<th style="text-align:left;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col1
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col2
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col3
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col4
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
col5
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row1
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
4
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
15
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row2
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
1
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
2
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
8
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;" indentlevel="1">
row3
</td>
<td style="text-align:right;padding-left: 3em;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;background-color: rgba(255, 255, 136, 255) !important;" indentlevel="1">
0
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 3em;font-weight: bold;background-color: rgba(240, 255, 233, 255) !important;font-weight: bold;" indentlevel="1">
Total
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;" indentlevel="1">
7
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
5
</td>
<td style="text-align:right;padding-left: 3em;background-color: white !important;font-weight: bold;" indentlevel="1">
6
</td>
<td style="text-align:right;padding-left: 3em;font-weight: bold;font-weight: bold;" indentlevel="1">
28
</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level3">
<h3 id="the-example-dataset-in-table-1">The example dataset in Table 1<a class="anchor" aria-label="anchor" href="#the-example-dataset-in-table-1"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statisticsnorway/ssb-smallcountrounding" class="external-link">SmallCountRounding</a></span><span class="op">)</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"exPSD"</span><span class="op">)</span></span>
<span><span class="va">z</span></span></code></pre></div>
<pre><code>   rows cols freq
1  row1 col1    6
2  row2 col1    1
3  row3 col1    0
4  row1 col2    0
5  row2 col2    2
6  row3 col2    1
7  row1 col3    1
8  row2 col3    3
9  row3 col3    1
10 row1 col4    3
11 row2 col4    1
12 row3 col4    0
13 row1 col5    4
14 row2 col5    2
15 row3 col5    2</code></pre>
</div>
<div class="section level3">
<h3 id="rounding-all-small-cells-table-2">Rounding all small cells (Table 2)<a class="anchor" aria-label="anchor" href="#rounding-all-small-cells-table-2"></a>
</h3>
<p>To avoid any small values in the range 1-4 we can use 5 as rounding
base.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">z</span>, freqVar <span class="op">=</span> <span class="st">"freq"</span>, roundBase <span class="op">=</span> <span class="fl">5</span>, dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rows"</span>, <span class="st">"cols"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The result is given in Table 2 and can bee seen in the output
elements below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">$</span><span class="va">inner</span></span></code></pre></div>
<pre><code>   rows cols original rounded difference
1  row1 col1        6       6          0
2  row2 col1        1       0         -1
3  row3 col1        0       0          0
4  row1 col2        0       0          0
5  row2 col2        2       0         -2
6  row3 col2        1       0         -1
7  row1 col3        1       0         -1
8  row2 col3        3       5          2
9  row3 col3        1       0         -1
10 row1 col4        3       5          2
11 row2 col4        1       0         -1
12 row3 col4        0       0          0
13 row1 col5        4       5          1
14 row2 col5        2       0         -2
15 row3 col5        2       5          3</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">$</span><span class="va">publish</span></span></code></pre></div>
<pre><code>    rows  cols original rounded difference
1  Total Total       27      26         -1
2  Total  col1        7       6         -1
3  Total  col2        3       0         -3
4  Total  col3        5       5          0
5  Total  col4        4       5          1
6  Total  col5        8      10          2
7   row1 Total       14      16          2
8   row1  col1        6       6          0
9   row1  col2        0       0          0
10  row1  col3        1       0         -1
11  row1  col4        3       5          2
12  row1  col5        4       5          1
13  row2 Total        9       5         -4
14  row2  col1        1       0         -1
15  row2  col2        2       0         -2
16  row2  col3        3       5          2
17  row2  col4        1       0         -1
18  row2  col5        2       0         -2
19  row3 Total        4       5          1
20  row3  col1        0       0          0
21  row3  col2        1       0         -1
22  row3  col3        1       0         -1
23  row3  col4        0       0          0
24  row3  col5        2       5          3</code></pre>
<p>The output element <code>publish</code> contains the original and
rounded versions of the all the 24 values in Table 2. The corresponding
element <code>inner</code> contains only the 15 inner cells and is
similar to the input data. The values in publish are
<code>additive</code>. That is, marginal cells (Totals) can be computed
straightforwardly from <code>inner</code> for both original and rounded
counts.</p>
</div>
<div class="section level3">
<h3 id="rounding-necessary-small-inner-cell-table-3">Rounding necessary small inner cell (Table 3)<a class="anchor" aria-label="anchor" href="#rounding-necessary-small-inner-cell-table-3"></a>
</h3>
<p>Assuming only row and column totals to be published, the publishable
cells can be defined by the formula <code>~rows+cols</code>. Rounding
can now be performed by:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">z</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">rows</span> <span class="op">+</span> <span class="va">cols</span><span class="op">)</span></span></code></pre></div>
<p>The result is given in Table 3 and can bee seen in the output
elements below.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span><span class="op">$</span><span class="va">inner</span></span></code></pre></div>
<pre><code>   rows cols original rounded difference
1  row1 col1        6       6          0
2  row2 col1        1       1          0
3  row3 col1        0       0          0
4  row1 col2        0       0          0
5  row2 col2        2       0         -2
6  row3 col2        1       5          4
7  row1 col3        1       0         -1
8  row2 col3        3       5          2
9  row3 col3        1       0         -1
10 row1 col4        3       5          2
11 row2 col4        1       0         -1
12 row3 col4        0       0          0
13 row1 col5        4       4          0
14 row2 col5        2       2          0
15 row3 col5        2       0         -2</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span><span class="op">$</span><span class="va">publish</span></span></code></pre></div>
<pre><code>   rows  cols original rounded difference
1 Total Total       27      28          1
2  row1 Total       14      15          1
3  row2 Total        9       8         -1
4  row3 Total        4       5          1
5 Total  col1        7       7          0
6 Total  col2        3       5          2
7 Total  col3        5       5          0
8 Total  col4        4       5          1
9 Total  col5        8       6         -2</code></pre>
</div>
<div class="section level3">
<h3 id="unique-output-obtained-by-local-random-generator-seed">Unique output obtained by local random generator seed<a class="anchor" aria-label="anchor" href="#unique-output-obtained-by-local-random-generator-seed"></a>
</h3>
<p>The underlying algorithm is sequential. Within a loop, the next cell
to be given the rounding base value is selected according to a
criterion. Random draw is used when draw criterion. To ensure unique
output, a fixed random generator seed is used locally within the
function without affecting the random value stream in R. See the
documentation of <code>rndSeed</code>, a parameter to
<code>RoundViaDummy</code>.</p>
</div>
<div class="section level3">
<h3 id="the-output-object">The output object<a class="anchor" aria-label="anchor" href="#the-output-object"></a>
</h3>
<p>The result of printing the output from <code>PLSrounding</code> is
(<code>a</code> and <code>b</code> as above):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span></span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             4          0.744         1.3333         1.6833 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     3      11     .      1      15     3      14     1      6      24
rounded     10       .     4      1      15    11       .     8      5      24
absDiff      4      11     .      .      15     5      19     .      .      24</code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span></span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             2          0.941              1         1.2019 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     3      11     .      1      15     .       3     1      5       9
rounded      8       3     3      1      15     .       .     4      5       9
absDiff      7       8     .      .      15     2       7     .      .       9</code></pre>
<p>First some utility measures are printet. For example
<code>maxdiff</code> is the maximum difference between an original and
rounded cells within <code>publish</code>. Thereafter a table of
frequencies of cell frequencies and absolute differences are printed.
Summary of <code>inner</code> and <code>publish</code> are shown in the
left and right parts of the table, respectively. For example, row
<code>rounded</code> and column <code>inn.6+</code> is the number of
rounded inner cell frequencies greater than or equal to 6. The last row
(<code>absDiff</code>) is based on the differences without signs.</p>
<p>It is possible to compute manually the printed utility measures
by:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">publish</span><span class="op">$</span><span class="va">original</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">publish</span><span class="op">$</span><span class="va">rounded</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  maxdiff        <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">g</span> <span class="op">-</span> <span class="va">f</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  HDutility      <span class="op">=</span>  <span class="fu"><a href="../reference/HDutility.html">HDutility</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">g</span><span class="op">)</span>, </span>
<span>  meanAbsDiff    <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">g</span> <span class="op">-</span> <span class="va">f</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  rootMeanSquare <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">g</span> <span class="op">-</span> <span class="va">f</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
      2.000000       0.940951       1.000000       1.201850 </code></pre>
<p>These measures are also found in the output element
<code>metrics</code> together with the same measures based on
<code>inner</code>. See <code><a href="../reference/HDutility.html">?HDutility</a></code> for more information
about the utility measure based on the Hellinger distance.</p>
<p>Apart from printing, output is a usual list and <code>summary</code>
works as usual.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<pre><code>          Length Class      Mode   
inner      5     data.frame list   
publish    5     data.frame list   
metrics    9     -none-     numeric
freqTable 30     -none-     numeric</code></pre>
<p>The output element <code>freqTable</code> is the table seen when the
output object is printed (frequencies of cell frequencies and absolute
differences).</p>
<p><br><br></p>
</div>
</div>
<div class="section level2">
<h2 id="hierarchical-data">Hierarchical data<a class="anchor" aria-label="anchor" href="#hierarchical-data"></a>
</h2>
<div class="section level3">
<h3 id="example-without-code-1">Example without code<a class="anchor" aria-label="anchor" href="#example-without-code-1"></a>
</h3>
<p>Below is a small data set to be used as input.</p>
<table class="table table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 4</strong>: Input data
</caption>
<thead><tr>
<th style="text-align:left;">
geo
</th>
<th style="text-align:left;">
eu
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
freq
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Iceland
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
nonEU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
2
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Portugal
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
3
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Spain
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2018
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
7
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Iceland
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
nonEU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
1
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Portugal
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
5
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
Spain
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
EU
</td>
<td style="text-align:left;padding-left: 0.8em;" indentlevel="1">
2019
</td>
<td style="text-align:right;padding-left: 0.8em;" indentlevel="1">
6
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The variables <code>geo</code> and <code>eu</code> is hierarchical
related. This data set can be processed in several ways. In some cases,
the entire table will be input and in other cases the <code>eu</code>
column can be omitted. Then, the hierarchical information is sent as
input in another way. One possibility is the table below, where the
hierarchy is coded as in the r package sdcTable.</p>
<table class="table table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 5</strong>: Hierarchy, <code>geo</code>
</caption>
<thead><tr>
<th style="text-align:left;">
levels
</th>
<th style="text-align:left;">
codes
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Total
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
EU
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Portugal
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Spain
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
nonEU
</td>
</tr>
<tr>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
@@@
</td>
<td style="text-align:left;padding-left: 2.4em;" indentlevel="1">
Iceland
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Another possibility is TauArgus coding. More general coding is also
possible. See <code>?AutoHierarchies</code> for more information.</p>
<p>Below is output in the case were all possible combinations (including
the inner cells) are to be published. Also in this example we use 5 as a
rounding base. As can be seen below, this output can be generated in
several ways. The inner cells are colored according to the rounding.</p>
<table class="table table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 6</strong>: Ouput data (publish)
</caption>
<thead><tr>
<th style="text-align:left;">
geo
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
original
</th>
<th style="text-align:right;">
rounded
</th>
<th style="text-align:right;">
difference
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;background-color: white !important;">
23
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;background-color: white !important;">
12
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;background-color: white !important;">
11
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
EU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;background-color: white !important;">
23
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
EU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;background-color: white !important;">
12
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
EU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;background-color: white !important;">
11
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
nonEU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-3
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
nonEU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
nonEU
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Iceland
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: white !important;">
0
</td>
<td style="text-align:right;">
-3
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Iceland
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;background-color: rgba(255, 255, 136, 255) !important;">
0
</td>
<td style="text-align:right;">
-2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Iceland
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;background-color: rgba(255, 255, 136, 255) !important;">
0
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Portugal
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;background-color: white !important;">
10
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Portugal
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;background-color: rgba(255, 255, 136, 255) !important;">
5
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Portugal
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;background-color: rgba(136, 255, 136, 255) !important;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Spain
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Total
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;background-color: white !important;">
13
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Spain
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2018
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;background-color: rgba(136, 255, 136, 255) !important;">
7
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
Spain
</td>
<td style="text-align:left;background-color: rgba(240, 255, 233, 255) !important;">
2019
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;background-color: rgba(136, 255, 136, 255) !important;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="data-table-4-and-hierarchies-table-5">Data (Table 4) and hierarchies (Table 5)<a class="anchor" aria-label="anchor" href="#data-table-4-and-hierarchies-table-5"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e6</span>  <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"e6"</span><span class="op">)</span>             <span class="co"># As Table 4 </span></span>
<span><span class="va">eDimList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"eDimList"</span><span class="op">)</span></span>
<span><span class="va">eDimList</span></span></code></pre></div>
<pre><code>$geo
  levels    codes
1      @    Total
2     @@       EU
3    @@@ Portugal
4    @@@    Spain
5     @@    nonEU
6    @@@  Iceland

$year
  levels codes
1      @ Total
2     @@  2018
3     @@  2019</code></pre>
<p>As seen above, a hierarchy is specified for both variables.
<code>eDimList$geo</code> is given in Table 5 and
<code>eDimList$year</code> is a plain hierarchy with total code.</p>
</div>
<div class="section level3">
<h3 id="four-ways-to-produce-table-6">Four ways to produce Table 6<a class="anchor" aria-label="anchor" href="#four-ways-to-produce-table-6"></a>
</h3>
<p>The four lines below produce the same results with element
<code>publish</code> as in Table 6. Ordering of rows can be
different.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  PLSrounding(e6, "freq", 5) # This is no longer possible. See ver. 1.1.0 news # a)</span></span>
<span><span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">e6</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geo"</span>, <span class="st">"eu"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span>                     <span class="co"># b) </span></span>
<span><span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">e6</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">eu</span> <span class="op">*</span> <span class="va">year</span> <span class="op">+</span> <span class="va">geo</span> <span class="op">*</span> <span class="va">year</span><span class="op">)</span>                   <span class="co"># c)</span></span>
<span><span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">e6</span><span class="op">[</span>, <span class="op">-</span><span class="fl">2</span><span class="op">]</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, hierarchies <span class="op">=</span> <span class="va">eDimList</span><span class="op">)</span>                        <span class="co"># d)</span></span>
<span><span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">e6</span><span class="op">[</span>, <span class="op">-</span><span class="fl">2</span><span class="op">]</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, hierarchies <span class="op">=</span> <span class="va">eDimList</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">geo</span> <span class="op">*</span> <span class="va">year</span><span class="op">)</span> <span class="co"># e)</span></span></code></pre></div>
<ul>
<li>In b) and d), the function uses hierarchies for the calculations. In
b) the hierarchies are found automatically from the input data. In a),
<code>dimVar</code> is assumed to be all variables except
<code>freq</code>.</li>
<li>In c) the cross-classifications are found from the formula. In
addition, hierarchical relations in the input data are analysed so that
<code>geo</code> and <code>eu</code> are combined into the same output
column.<br>
</li>
<li>In e), how to cross the hierarchies are defined by a formula.</li>
</ul>
</div>
<div class="section level3">
<h3 id="remarks-and-other-parameters">Remarks and other parameters<a class="anchor" aria-label="anchor" href="#remarks-and-other-parameters"></a>
</h3>
<p>A difference occur when all combinations are not contained in input
data. Then c) above will limit output to combinations available in
input. In the other cases zeroes will be added. The extra zeroes can be
avoided by using <code>removeEmpty=TRUE</code>. Note also the parameter
<code>inputInOutput</code> which can be used to specify whether to
include codes from input. Below is an example with incomplete input data
using both these parameters.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/PLSrounding.html">PLSrounding</a></span><span class="op">(</span><span class="va">e6</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>, <span class="op">]</span>, <span class="st">"freq"</span>, <span class="fl">5</span>, removeEmpty <span class="op">=</span> <span class="cn">TRUE</span>, inputInOutput <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>,<span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                   dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geo"</span>, <span class="st">"eu"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">out</span></span></code></pre></div>
<pre><code>
PLSrounding summary:  

       maxdiff      HDutility    meanAbsDiff rootMeanSquare 
             1         0.8925            0.5         0.7071 

Frequencies of cell frequencies and absolute differences:  

         inn.0 inn.1-4 inn.5 inn.6+ inn.all pub.0 pub.1-4 pub.5 pub.6+ pub.all
original     .       2     1      2       5     .       2     .      6       8
rounded      1       1     1      2       5     2       .     .      6       8
absDiff      4       1     .      .       5     4       4     .      .       8</code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span><span class="op">$</span><span class="va">inner</span></span></code></pre></div>
<pre><code>       geo year original rounded difference
2 Portugal 2018        3       3          0
3    Spain 2018        7       7          0
4  Iceland 2019        1       0         -1
5 Portugal 2019        5       5          0
6    Spain 2019        6       6          0</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span><span class="op">$</span><span class="va">publish</span></span></code></pre></div>
<pre><code>    geo  year original rounded difference
1 Total Total       22      21         -1
2 Total  2018       10      10          0
3 Total  2019       12      11         -1
4    EU Total       21      21          0
5    EU  2018       10      10          0
6    EU  2019       11      11          0
7 nonEU Total        1       0         -1
8 nonEU  2019        1       0         -1</code></pre>
<p>In this case only a single inner cell needed to be rounded (Iceland,
2019). The original small value of (Portugal, 2018) could be
retained.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Johan Heldal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>

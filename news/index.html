<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • SmallCountRounding</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SmallCountRounding</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction_to_SmallCountRounding.html">Introduction to 'SmallCountRounding'</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-smallcountrounding/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/statisticsnorway/ssb-smallcountrounding/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="smallcountrounding-110">SmallCountRounding 1.1.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-110"></a></h2><p class="text-muted">CRAN release: 2024-12-09</p>
<ul><li>Added a check to ensure that at least one of <code>dimVar</code>, <code>hierarchies</code>, or <code>formula</code> is specified.
<ul><li>This is a breaking change that may affect previous code.</li>
<li>Previously, if all were unspecified, <code>dimVar</code> was automatically generated from the remaining columns.</li>
<li>While this behavior was correctly implemented, it often stemmed from user input errors and could lead to unexpected behavior or crashes.</li>
<li>This change now requires explicit input, making the function more robust and reducing the risk of user errors.</li>
</ul></li>
<li>Improved support for <code>tibble</code> and <code>data.table</code> input (parameter <code>data</code>).
<ul><li>Input is now explicitly coerced to a data frame using <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> where necessary to ensure consistent behavior.</li>
<li>When <code>preAggregate</code> is <code>TRUE</code> and <code>aggregatePackage</code> is <code>"data.table"</code>, the use of <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> is skipped to avoid unnecessary back-and-forth conversion of <code>data.table</code> objects, preserving efficiency.</li>
<li>Applies to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code> and its wrappers.</li>
</ul></li>
<li>Note new hierarchy possibilities due to the new version of <a href="https://CRAN.R-project.org/package=SSBtools" class="external-link">the SSBtools package</a> (version 1.6.0).
<ul><li>
<p>Output from functions like <code>get_klass()</code> in the <a href="https://cran.r-project.org/package=klassR" class="external-link">klassR package</a> or <code><a href="https://rdrr.io/pkg/sdcHierarchies/man/hier_create.html" class="external-link">hier_create()</a></code> in the <a href="https://cran.r-project.org/package=sdcHierarchies" class="external-link">sdcHierarchies package</a> can now be used directly as input. Example of usage:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">get_klass</span><span class="op">(</span>classification <span class="op">=</span> <span class="st">"24"</span><span class="op">)</span></span>
<span> <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sdcHierarchies/man/hier_create.html" class="external-link">hier_create</a></span><span class="op">(</span>root <span class="op">=</span> <span class="st">"Total"</span>, nodes <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span> <span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">a</span><span class="op">$</span><span class="va">code</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">a</span><span class="op">$</span><span class="va">code</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">]</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                      letter <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span> <span class="fu"><a href="../reference/PLSrounding.html">PLSroundingPublish</a></span><span class="op">(</span><span class="va">mydata</span>, roundBase <span class="op">=</span> <span class="fl">5</span>, hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">a</span>, letter <span class="op">=</span> <span class="va">b</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</li>
<li><p>New possibilities for working with both formulas and hierarchies are now available through the <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/map_hierarchies_to_data.html" class="external-link">map_hierarchies_to_data()</a></code> function.</p></li>
<li><p>Improved functionality for combining formulas with the <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSums.html" class="external-link">Formula2ModelMatrix()</a></code> parameter <code>avoidHierarchical = TRUE</code>, thanks to the new <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/total_collapse.html" class="external-link">total_collapse()</a></code> function which can be applied to output.</p></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.8" id="smallcountrounding-108">SmallCountRounding 1.0.8<a class="anchor" aria-label="anchor" href="#smallcountrounding-108"></a></h2><p class="text-muted">CRAN release: 2024-10-22</p>
<ul><li>
<code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSelection.html" class="external-link">FormulaSelection()</a></code> now works with the output from <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code>.
<ul><li>The output dataset corresponding to a restricted part of the input formula can now be easily retrieved.</li>
<li>See the examples in the documentation.</li>
</ul></li>
<li>
<code>extend0</code> is new parameter to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code>, enabling data to be automatically extended by zero frequency rows.
<ul><li>This is relevant when <code>zeroCandidates = TRUE</code>.</li>
<li>The old parameter in <code><a href="../reference/PLSroundingFits.html">PLSroundingFits()</a></code> has been renamed from <code>extend0</code> to <code>extend0Fits</code>. Code that used the old parameter will now behave differently.</li>
<li>Note that <code>extend0</code> and <code>extend0Fits</code> can now be specified in more advanced ways beyond just TRUE/FALSE.</li>
</ul></li>
<li>Improvements to the <code>step</code> parameter, which can be passed to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code> and is documented in the underlying function <code><a href="../reference/RoundViaDummy.html">RoundViaDummy()</a></code>:
<ul><li>A bug that could cause a hang when using <code>step</code> has been fixed.</li>
<li>The <code>step</code> parameter can now be specified as a vector for greater control.</li>
<li>Additionally, it can be provided as a list to trigger a final re-run iteration.</li>
<li>The <code>step</code> parameter can significantly impact performance on large datasets. For example, using <code>step = list(100)</code> may be a useful approach.</li>
</ul></li>
<li>Due to updates in <a href="https://CRAN.R-project.org/package=SSBtools" class="external-link">the SSBtools package</a> (version 1.5.4), it is now meaningful to include NA’s in the grouping variables.
<ul><li>Note the parameter <code>NAomit</code> to <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSums.html" class="external-link">SSBtools::Formula2ModelMatrix()</a></code>:
<ul><li>When <code>TRUE</code>, NAs in the grouping variables are omitted in output and not included as a separate category.</li>
<li>This parameter can be input to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code> and its wrappers.</li>
</ul></li>
<li>
<code>aggregateNA</code> is new parameter to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code>:
<ul><li>Whether to include NAs in the grouping variables while preAggregate.</li>
<li>Needs to be <code>TRUE</code> (default) to utilize the above <code>NAomit</code> parameter.</li>
</ul></li>
</ul></li>
<li>Due to updates in <a href="https://CRAN.R-project.org/package=SSBtools" class="external-link">the SSBtools package</a> (version 1.5.4), where <a href="https://cran.r-project.org/package=data.table" class="external-link">data.table</a> is now listed under <em>Suggests</em>, some functionality can be speeded up.
<ul><li>Set the new parameter <code>aggregatePackage</code> to <code>"data.table"</code> to utilize this possibility.
<ul><li>
<code>aggregatePackage</code> is parameter to <code><a href="../reference/PLSrounding.html">PLSrounding()</a></code> and its wrappers.</li>
<li>Also note the related new parameters <code>aggregateBaseOrder</code>.</li>
</ul></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.5" id="smallcountrounding-105">SmallCountRounding 1.0.5<a class="anchor" aria-label="anchor" href="#smallcountrounding-105"></a></h2><p class="text-muted">CRAN release: 2024-09-05</p>
<ul><li>Minor updates with no changes in functionality
<ul><li>Changed package license to MIT, in accordance with the policy at Statistics Norway.</li>
<li>Some technical changes in documentation to comply with standards.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.3" id="smallcountrounding-103">SmallCountRounding 1.0.3<a class="anchor" aria-label="anchor" href="#smallcountrounding-103"></a></h2><p class="text-muted">CRAN release: 2022-11-16</p>
<ul><li>Workaround for old <code>R</code> versions where the <code>isFALSE</code> function is not defined.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="smallcountrounding-102">SmallCountRounding 1.0.2<a class="anchor" aria-label="anchor" href="#smallcountrounding-102"></a></h2><p class="text-muted">CRAN release: 2022-10-12</p>
<ul><li>Improved behavior of the <code>identifyNew</code> parameter when the <code>maxRound</code> parameter is used.
<ul><li>New description of the <code>identifyNew</code> parameter: When <code>TRUE</code>, new cells may be identified after initial rounding to ensure all rounded publishable cells equal to or less than <code>maxRound</code> to be <code>roundBase</code> multiples. Use <code>NA</code> for the a less conservative behavior (old behavior). Then it is ensured that no nonzero rounded publishable cells are smaller than <code>roundBase</code>. When <code>maxRound</code> is default, there is no difference between <code>TRUE</code> and <code>NA</code>.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="smallcountrounding-100">SmallCountRounding 1.0.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-100"></a></h2><p class="text-muted">CRAN release: 2022-08-26</p>
<ul><li>New function, <code>PLSroundingLoop</code>: PLSrounding on portions of data at a time.
<ul><li>The  runs are coordinated by using preliminary differences as input for the next run (parameter <code>preDifference</code>)</li>
</ul></li>
<li>Parameters <code>zeroCandidates</code>, <code>forceInner</code>, <code>preRounded</code> and <code>plsWeights</code> can now be specified as functions.
<ul><li>These cannot be supplied as vectors in <code>PLSroundingLoop</code>.</li>
</ul></li>
<li>New parameter, <code>allSmall</code>.
<ul><li>When TRUE, all small inner cells (<code>&lt;= maxRound</code>) are rounded. A simplified alternative to specifying <code>forceInner</code>.</li>
</ul></li>
<li>Adaption needed after Matrix ver. 1.4-2 (not a user-visible change)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.9.0" id="smallcountrounding-090">SmallCountRounding 0.9.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-090"></a></h2><p class="text-muted">CRAN release: 2021-09-29</p>
<ul><li>New function, <code>PLSroundingFits</code>, for post-processing to expected frequencies
<ul><li>Expected inner cell frequencies are generated by iterative proportional fitting</li>
</ul></li>
<li>
<code>plsWeights</code> is new parameter to <code>RoundViaDummy</code> (and <code>PLSrounding</code>)
<ul><li>A vector of weights for each cell to be published or a function generating it. For use in the algorithm criterion.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.8.0" id="smallcountrounding-080">SmallCountRounding 0.8.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-080"></a></h2><p class="text-muted">CRAN release: 2021-04-26</p>
<ul><li>Now, microdata input is allowed. This is due to
<ul><li>Allowing empty <code>freqVar</code> in input.</li>
<li>The new parameter <code>preAggregate</code>: When <code>TRUE</code>, the data will be aggregated beforehand within the function by the dimensional variables.</li>
</ul></li>
<li>It is possible to avoid handling hierarchical variables when using the formula interface.
<ul><li>This is a consequence of parameter <code>avoidHierarchical</code> to <code>Formula2ModelMatrix</code> in the SSBtools package.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.7.0" id="smallcountrounding-070">SmallCountRounding 0.7.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-070"></a></h2><p class="text-muted">CRAN release: 2021-03-09</p>
<ul><li>Now, a random generator seed is used locally within the function without affecting the random value stream in R.
<ul><li>Handled by <code>rndSeed</code>, a new parameter to <code>RoundViaDummy</code> (and <code>PLSrounding</code>).</li>
<li>By default, <code>rndSeed = 123</code>. This means that repeated runs with equal input will result in equal output.</li>
<li>To get back the old behaviour of the function, set <code>rndSeed</code> to <code>NULL</code>.</li>
</ul></li>
<li>Possible to return a single data frame: <code>"inner"</code> or <code>"publish"</code>.
<ul><li>Handled by <code>output</code>, a new parameter to <code>PLSrounding</code>.</li>
<li>New wrapper functions, <code>PLSroundingInner</code> and <code>PLSroundingPublish</code>.</li>
</ul></li>
<li>
<code>dimVar</code> is new parameter to <code>RoundViaDummy</code> and <code>PLSrounding</code>
<ul><li>The main dimensional variables and additional aggregating variables. This parameter can be useful when hierarchies and formula are unspecified.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.6.0" id="smallcountrounding-060">SmallCountRounding 0.6.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-060"></a></h2><p class="text-muted">CRAN release: 2020-10-15</p>
<ul><li>
<code>preRounded</code> is new parameter to <code>RoundViaDummy</code> (and <code>PLSrounding</code>)
<ul><li>A mixture of missing values and predetermined values of rounded inner cells</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.5.0" id="smallcountrounding-050">SmallCountRounding 0.5.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-050"></a></h2><p class="text-muted">CRAN release: 2020-09-21</p>
<ul><li>Formula combined with hierarchies is now possible
<ul><li>This is a consequence of the function <code>HierarchiesAndFormula2ModelMatrix</code> in the SSBtools package</li>
</ul></li>
<li>
<code>leverageCheck</code> and <code>easyCheck</code> are new parameters to <code>RoundViaDummy</code>
<ul><li>This provides protection against possible disclosure of small numbers by linear relationships (difference attack)</li>
<li>The function <code>Reduce0exact</code> in the SSBtools package is utilised</li>
</ul></li>
<li>
<code>printInc</code> is new parameter to <code>PLSrounding</code> and <code>RoundViaDummy</code>
<ul><li>Whether to print iteration information to the console</li>
</ul></li>
<li>Possible to specify <code>removeEmpty=TRUE</code> to omit empty combinations
<ul><li>Parameter to <code>Hierarchies2ModelMatrix</code> and <code>HierarchiesAndFormula2ModelMatrix</code> in the SSBtools package</li>
</ul></li>
<li>The parameter <code>inputInOutput</code> is also mentioned in the RoundViaDummy documentation
<ul><li>Parameter to same functions as above</li>
<li>Can be used to specify whether to include codes from input</li>
</ul></li>
<li>A vignette, “Introduction to ‘SmallCountRounding’”, is included</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.4.0" id="smallcountrounding-040">SmallCountRounding 0.4.0<a class="anchor" aria-label="anchor" href="#smallcountrounding-040"></a></h2><p class="text-muted">CRAN release: 2019-10-17</p>
<ul><li>Last version before any news</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Johan Heldal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


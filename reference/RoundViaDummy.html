<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Small Count Rounding of Tabular Data — RoundViaDummy • SmallCountRounding</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Small Count Rounding of Tabular Data — RoundViaDummy"><meta name="description" content="Small count rounding via a dummy matrix and by an algorithm inspired by PLS"><meta property="og:description" content="Small count rounding via a dummy matrix and by an algorithm inspired by PLS"><meta property="og:image" content="https://statisticsnorway.github.io/ssb-smallcountrounding/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SmallCountRounding</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction_to_SmallCountRounding.html">Introduction to 'SmallCountRounding'</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-smallcountrounding/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Small Count Rounding of Tabular Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-smallcountrounding/blob/master/R/RoundViaDummy.R" class="external-link"><code>R/RoundViaDummy.R</code></a></small>
      <div class="d-none name"><code>RoundViaDummy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Small count rounding via a dummy matrix and by an algorithm inspired by PLS</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RoundViaDummy</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">freqVar</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roundBase <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  singleRandom <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  crossTable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  total <span class="op">=</span> <span class="st">"Total"</span>,</span>
<span>  maxIterRows <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  maxIter <span class="op">=</span> <span class="fl">1e+07</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hierarchies <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xReturn <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  maxRound <span class="op">=</span> <span class="va">roundBase</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>  zeroCandidates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  forceInner <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  identifyNew <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  step <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  preRounded <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  leverageCheck <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  easyCheck <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  printInc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rndSeed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  dimVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plsWeights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preDifference <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allSmall <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data as a data frame (inner cells)</p></dd>


<dt id="arg-freqvar">freqVar<a class="anchor" aria-label="anchor" href="#arg-freqvar"></a></dt>
<dd><p>Variable holding counts (name or number)</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>Model formula defining publishable cells. Will be used to calculate <code>x</code> (via <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/ModelMatrix.html" class="external-link">ModelMatrix</a></code>).
When NULL, x must be supplied.</p></dd>


<dt id="arg-roundbase">roundBase<a class="anchor" aria-label="anchor" href="#arg-roundbase"></a></dt>
<dd><p>Rounding base</p></dd>


<dt id="arg-singlerandom">singleRandom<a class="anchor" aria-label="anchor" href="#arg-singlerandom"></a></dt>
<dd><p>Single random draw when TRUE (instead of algorithm)</p></dd>


<dt id="arg-crosstable">crossTable<a class="anchor" aria-label="anchor" href="#arg-crosstable"></a></dt>
<dd><p>When TRUE, cross table in output and caculations via FormulaSums()</p></dd>


<dt id="arg-total">total<a class="anchor" aria-label="anchor" href="#arg-total"></a></dt>
<dd><p>String used to name totals</p></dd>


<dt id="arg-maxiterrows">maxIterRows<a class="anchor" aria-label="anchor" href="#arg-maxiterrows"></a></dt>
<dd><p>See details</p></dd>


<dt id="arg-maxiter">maxIter<a class="anchor" aria-label="anchor" href="#arg-maxiter"></a></dt>
<dd><p>Maximum number of iterations</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Dummy matrix defining publishable cells</p></dd>


<dt id="arg-hierarchies">hierarchies<a class="anchor" aria-label="anchor" href="#arg-hierarchies"></a></dt>
<dd><p>List of hierarchies, which can be converted by <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/AutoHierarchies.html" class="external-link">AutoHierarchies</a></code>.
Thus, a single string as hierarchy input is assumed to be a total code.
Exceptions are <code>"rowFactor"</code> or <code>""</code>, which correspond to only using the categories in the data.</p></dd>


<dt id="arg-xreturn">xReturn<a class="anchor" aria-label="anchor" href="#arg-xreturn"></a></dt>
<dd><p>Dummy matrix in output when TRUE (as input parameter <code>x</code>)</p></dd>


<dt id="arg-maxround">maxRound<a class="anchor" aria-label="anchor" href="#arg-maxround"></a></dt>
<dd><p>Inner cells contributing to original publishable cells equal to or less than maxRound will be rounded.</p></dd>


<dt id="arg-zerocandidates">zeroCandidates<a class="anchor" aria-label="anchor" href="#arg-zerocandidates"></a></dt>
<dd><p>When TRUE, inner cells in input with zero count (and multiple of roundBase when maxRound is in use)
contributing to publishable cells will be included as candidates to obtain roundBase value.
With vector input, the rule is specified individually for each cell.
This can be specified as a vector, a variable in data or a function generating it (see details).</p></dd>


<dt id="arg-forceinner">forceInner<a class="anchor" aria-label="anchor" href="#arg-forceinner"></a></dt>
<dd><p>When TRUE, all inner cells will be rounded. Use vector input to force individual cells to be rounded.
This can be specified as a vector, a variable in data or a function generating it (see details).
Can be combined with parameter zeroCandidates to allow zeros and roundBase multiples to be rounded up.</p></dd>


<dt id="arg-identifynew">identifyNew<a class="anchor" aria-label="anchor" href="#arg-identifynew"></a></dt>
<dd><p>When <code>TRUE</code>, new cells may be identified after initial rounding to ensure all rounded publishable
cells equal to or less than <code>maxRound</code> to be <code>roundBase</code> multiples. Use <code>NA</code> for the a less conservative
behavior (old behavior). Then it is ensured that no nonzero rounded publishable cells are smaller
than <code>roundBase</code>. When <code>maxRound</code> is default, there is no difference between <code>TRUE</code> and <code>NA</code>.</p></dd>


<dt id="arg-step">step<a class="anchor" aria-label="anchor" href="#arg-step"></a></dt>
<dd><p>When <code>step&gt;1</code>, the original forward part of the algorithm is replaced by a kind of stepwise.
After <code>step</code> steps forward, backward steps may be performed. The <code>step</code> parameter is also used
for backward-forward iteration at the end of the algorithm; <code>step</code> backward steps may be performed.
For greater control, the <code>step</code> parameter can be specified as a vector.
Additionally, it can be provided as a list to trigger a final re-run iteration.
See details.</p></dd>


<dt id="arg-prerounded">preRounded<a class="anchor" aria-label="anchor" href="#arg-prerounded"></a></dt>
<dd><p>A vector or a variable in data that contains a mixture of missing values and predetermined values of rounded inner cells.
Can also be specified as a function generating it (see details).</p></dd>


<dt id="arg-leveragecheck">leverageCheck<a class="anchor" aria-label="anchor" href="#arg-leveragecheck"></a></dt>
<dd><p>When TRUE, all inner cells that depends linearly on the published cells and with small frequencies
(<code>&lt;=maxRound</code>) will be rounded.
The computation of leverages can be very time and memory consuming.
The function <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/Reduce0exact.html" class="external-link">Reduce0exact</a></code> is called.
The default leverage limit is <code>0.999999</code>. Another limit can be sent as input instead of <code>TRUE</code>.
Checking is performed before and after (since new zeros) rounding. Extra iterations are performed when needed.</p></dd>


<dt id="arg-easycheck">easyCheck<a class="anchor" aria-label="anchor" href="#arg-easycheck"></a></dt>
<dd><p>A light version of the above leverage checking.
Checking is performed after rounding. Extra iterations are performed when needed.
<code>Reduce0exact</code> is called with <code>reduceByLeverage=FALSE</code> and <code>reduceByColSums=TRUE</code>.</p></dd>


<dt id="arg-printinc">printInc<a class="anchor" aria-label="anchor" href="#arg-printinc"></a></dt>
<dd><p>Printing iteration information to console when TRUE</p></dd>


<dt id="arg-rndseed">rndSeed<a class="anchor" aria-label="anchor" href="#arg-rndseed"></a></dt>
<dd><p>If non-NULL, a random generator seed to be used locally within the function without affecting the random value stream in R.</p></dd>


<dt id="arg-dimvar">dimVar<a class="anchor" aria-label="anchor" href="#arg-dimvar"></a></dt>
<dd><p>The main dimensional variables and additional aggregating variables. This parameter can be  useful when hierarchies and formula are unspecified.</p></dd>


<dt id="arg-plsweights">plsWeights<a class="anchor" aria-label="anchor" href="#arg-plsweights"></a></dt>
<dd><p>A vector of weights for each cell to be published or a function generating it (see details). For use in the algorithm criterion.</p></dd>


<dt id="arg-predifference">preDifference<a class="anchor" aria-label="anchor" href="#arg-predifference"></a></dt>
<dd><p>A data.frame with differences already obtained from rounding another subset of data.
There must be columns that match <code>crossTable</code>. Differences must be in the last column.</p></dd>


<dt id="arg-allsmall">allSmall<a class="anchor" aria-label="anchor" href="#arg-allsmall"></a></dt>
<dd><p>When TRUE, all small inner cells (<code>&lt;= maxRound</code>) are rounded. This parameter is a simplified alternative to specifying <code>forceInner</code>  (see details).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further parameters sent to <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/ModelMatrix.html" class="external-link">ModelMatrix</a></code>.
In particular, one can specify <code>removeEmpty=TRUE</code> to omit empty combinations.
The parameter <code>inputInOutput</code> can be used to specify whether to include codes from input.
The parameter <code>avoidHierarchical</code> (<code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSums.html" class="external-link">Formula2ModelMatrix</a></code>) can be combined with formula input.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list where the two first elements are two column matrices.
The first matrix consists of inner cells and the second of cells to be published.
In each matrix the first and the second column contains, respectively, original and rounded values.
By default the cross table is the third element of the output list.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Small count rounding of necessary inner cells are performed so that all small frequencies of cross-classifications to be published
(publishable cells) are rounded. This is equivalent to changing micro data since frequencies of unique combinations are changed.
Thus, additivity and consistency are guaranteed. The matrix multiplication formula is:
<code>yPublish</code> <code>=</code> <code>t(x)</code> <code>%*%</code>  <code>yInner</code>, where <code>x</code> is the dummy matrix.</p>
<p>Parameters <code>zeroCandidates</code>, <code>forceInner</code>,  <code>preRounded</code> and <code>plsWeights</code> can be specified as functions.
The supplied functions take the following arguments: <code>data</code>, <code>yPublish</code>,  <code>yInner</code>, <code>crossTable</code>, <code>x</code>, <code>roundBase</code>, <code>maxRound</code>, and <code>...</code>,
where the first two are numeric vectors of original counts.
When <code>allSmall</code> is <code>TRUE</code>,  <code>forceInner</code> is set to  <code>function(yInner, maxRound, ...)</code> <code>yInner &lt;= maxRound</code>.</p>
<p>Details about the <code>step</code> parameter:</p><ul><li><p><code>step</code> as a numeric vector is converted to three parameters by</p><ul><li><p><code>step1 &lt;- step[1]</code></p></li>
<li><p><code>step2 &lt;- ifelse(length(step)&gt;=2, step[2], round(step/2))</code></p></li>
<li><p><code>step3 &lt;- ifelse(length(step)&gt;=3, step[3], step[1])</code></p></li>
</ul><p>After <code>step1</code> steps forward, up to <code>step2</code> backward steps may be performed.
At the end of the algorithm;  up to <code>step3</code> backward steps may be executed repeatedly.</p></li>
<li><p><code>step</code> when provided as a list (of numeric vectors), is adjusted to a length of 3 using <code>rep_len(step, 3)</code>.</p><ul><li><p><code>step[[1]]</code> is used in the main iterations.</p></li>
<li><p><code>step[[2]]</code>, when non-<code>NULL</code>, is used in a final re-run iteration.</p></li>
<li><p><code>step[[3]]</code> is used in extra iterations caused by <code>easyCheck</code> or <code>leverageCheck</code>.</p></li>
</ul><p>Setting <code>step = list(0)</code> will result in standard behavior, with the exception that an extra re-run iteration is performed.
The most detailed setting is achieved by setting <code>step</code> to a length-3 list where each element has length 3.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Iterations are needed since after initial rounding of identified cells, new cells are identified.
If cases of a high number of identified cells the algorithm can be too memory consuming (unless singleRandom=TRUE).
To avoid problems, not more than maxIterRows cells are rounded in each iteration.
The iteration limit (maxIter) is by default set to be high since a low number of maxIterRows may need a high number of iterations.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See the  user-friendly wrapper <code><a href="PLSrounding.html">PLSrounding</a></code>
and see <code>Round2</code> for rounding by other algorithm</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># See similar and related examples in PLSrounding documentation</span></span></span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"e6"</span><span class="op">)</span>, <span class="st">"freq"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yInner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]        3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]        7       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]        1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]        5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,]        6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yPublish</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:Total          24      24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:2018           12      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:2019           12      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:Total             21      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:2018              10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:2019              11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nonEU:Total           3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nonEU:2018            2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nonEU:2019            1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:Total         3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:2018          2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:2019          1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:Total        8       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:2018         3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:2019         5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:Total          13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:2018            7       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:2019            6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $crossTable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         geo  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Total Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     Total  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Total  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        EU Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        EU  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        EU  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     nonEU Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     nonEU  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     nonEU  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  Iceland Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  Iceland  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  Iceland  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 Portugal Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Portugal  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Portugal  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16    Spain Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    Spain  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    Spain  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"e6"</span><span class="op">)</span>, <span class="st">"freq"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">eu</span> <span class="op">*</span> <span class="va">year</span> <span class="op">+</span> <span class="va">geo</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yInner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]        3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]        7       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]        1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]        5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,]        6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yPublish</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-Total          24      24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-EU             21      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-nonEU           3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2018-Total           12      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2019-Total           12      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-Iceland         3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-Portugal        8       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-Spain          13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2018-EU              10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2019-EU              11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2018-nonEU            2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2019-nonEU            1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $crossTable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year      geo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Total       EU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Total    nonEU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2018    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2019    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Total  Iceland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Total Portugal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Total    Spain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   2018       EU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  2019       EU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  2018    nonEU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  2019    nonEU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"e6"</span><span class="op">)</span>, <span class="st">"freq"</span>, hierarchies <span class="op">=</span> </span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EU"</span>, <span class="st">"@Portugal"</span>, <span class="st">"@Spain"</span>, <span class="st">"Iceland"</span><span class="op">)</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018"</span>, <span class="st">"2019"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yInner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]        2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]        3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]        7       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]        1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]        5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,]        6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yPublish</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:Total          24      24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:2018           12      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total:2019           12      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:Total             21      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:2018              10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EU:2019              11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:Total         3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:2018          2       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iceland:2019          1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:Total        8       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:2018         3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Portugal:2019         5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:Total          13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:2018            7       7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spain:2019            6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $crossTable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         geo  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Total Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     Total  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Total  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        EU Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        EU  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        EU  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   Iceland Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   Iceland  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   Iceland  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Portugal Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Portugal  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Portugal  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    Spain Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    Spain  2018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    Spain  2019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">'z2'</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>              <span class="st">'ant'</span>, <span class="op">~</span><span class="va">region</span> <span class="op">+</span> <span class="va">hovedint</span> <span class="op">+</span> <span class="va">fylke</span><span class="op">*</span><span class="va">hovedint</span> <span class="op">+</span> <span class="va">kostragr</span><span class="op">*</span><span class="va">hovedint</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**..:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yInner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]       11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,]        7      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]        5       5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,]       13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]        9       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,]       12      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,]        6       6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]        9       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,]        3       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,]        9       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11,]        4       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12,]       11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13,]        1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [14,]        8       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15,]        2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16,]       14      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17,]        9       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [18,]        4      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19,]        3       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [20,]        0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [21,]        0       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22,]        2       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [23,]       55      55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [24,]       29      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25,]       35      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [26,]       17      17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [27,]       63      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [28,]       24      24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [29,]       22      22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [30,]       38      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [31,]        9       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [32,]       32      32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [33,]       18      18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [34,]       36      36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [35,]       18      18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [36,]       25      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [37,]       13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [38,]       52      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [39,]       22      22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [40,]        8       8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [41,]       15      15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [42,]        2       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [43,]       20      20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [44,]       11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $yPublish</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                original rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-Total         706     709</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A-Total             113     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> B-Total              55      57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> C-Total              73      73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> D-Total              45      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> E-Total             138     138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> F-Total              67      67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> G-Total              40      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H-Total              65      62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> I-Total              14      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> J-Total              61      61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> K-Total              35      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-annet          88      91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-arbeid         54      54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-soshjelp      342     342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total-trygd         222     222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1-Total             127     127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4-Total              55      57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5-Total             118     118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6-Total             205     205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8-Total             105     108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-Total             96      94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300-Total           596     601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 400-Total           110     108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1-annet              14      14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4-annet               7      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5-annet              18      18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6-annet              21      21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8-annet              15      15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-annet             13      13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1-arbeid             11      11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4-arbeid              1       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5-arbeid             10      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6-arbeid             23      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8-arbeid              7      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-arbeid             2       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1-soshjelp           64      64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4-soshjelp           29      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5-soshjelp           52      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6-soshjelp           87      87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8-soshjelp           60      60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-soshjelp          50      50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1-trygd              38      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4-trygd              18      18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5-trygd              38      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6-trygd              74      74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8-trygd              23      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10-trygd             31      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300-annet            72      75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 400-annet            16      16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300-arbeid           52      54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 400-arbeid            2       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300-soshjelp        283     283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 400-soshjelp         59      59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 300-trygd           189     189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 400-trygd            33      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $crossTable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region hovedint</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Total    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       A    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       B    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       C    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       D    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       E    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       F    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       G    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       H    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      I    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      J    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      K    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  Total    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  Total   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  Total soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  Total    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      1    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      4    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      5    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      6    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21      8    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     10    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23    300    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    400    Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25      1    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26      4    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27      5    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28      6    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29      8    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30     10    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31      1   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32      4   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33      5   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34      6   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35      8   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36     10   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37      1 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38      4 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39      5 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40      6 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41      8 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42     10 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43      1    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44      4    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45      5    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46      6    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47      8    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48     10    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49    300    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50    400    annet</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51    300   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52    400   arbeid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53    300 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54    400 soshjelp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55    300    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56    400    trygd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">mf</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">region</span><span class="op">*</span><span class="va">mnd</span> <span class="op">+</span> <span class="va">hovedint</span><span class="op">*</span><span class="va">mnd</span> <span class="op">+</span> <span class="va">fylke</span><span class="op">*</span><span class="va">hovedint</span><span class="op">*</span><span class="va">mnd</span> <span class="op">+</span> <span class="va">kostragr</span><span class="op">*</span><span class="va">hovedint</span><span class="op">*</span><span class="va">mnd</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">'z3'</span><span class="op">)</span>, <span class="st">'ant'</span>, <span class="va">mf</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**........=-**.:=-**.:=]</span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">'sosialFiktiv'</span><span class="op">)</span>, <span class="st">'ant'</span>, <span class="va">mf</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.........:=]</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">b</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,digits<span class="op">=</span><span class="fl">12</span><span class="op">)</span> <span class="co"># Correlation between original and rounded</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                original        rounded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> original 1.000000000000 0.999999987033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rounded  0.999999987033 1.000000000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Demonstrate parameter leverageCheck </span></span></span>
<span class="r-in"><span><span class="co"># The 42nd inner cell must be rounded since it can be revealed from the published cells.</span></span></span>
<span class="r-in"><span><span class="va">mf2</span> <span class="op">&lt;-</span> <span class="op">~</span><span class="va">region</span> <span class="op">+</span> <span class="va">hovedint</span> <span class="op">+</span> <span class="va">fylke</span> <span class="op">*</span> <span class="va">hovedint</span> <span class="op">+</span> <span class="va">kostragr</span> <span class="op">*</span> <span class="va">hovedint</span></span></span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"z2"</span><span class="op">)</span>, <span class="st">"ant"</span>, <span class="va">mf2</span>, leverageCheck <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span><span class="fl">42</span>, <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [-**.:=]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> original  rounded </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        2        2 </span>
<span class="r-in"><span><span class="fu">RoundViaDummy</span><span class="op">(</span><span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"z2"</span><span class="op">)</span>, <span class="st">"ant"</span>, <span class="va">mf2</span>, leverageCheck <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span><span class="fl">42</span>, <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [{-x-=H-}(check:1)-**..:={-zx-=H-}]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> original  rounded </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        2        3 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Demonstrate parameters maxRound, zeroCandidates and forceInner </span></span></span>
<span class="r-in"><span><span class="co"># by tabulating the inner cells that have been changed.</span></span></span>
<span class="r-in"><span><span class="va">z4</span> <span class="op">&lt;-</span> <span class="fu"><a href="SmallCountData.html">SmallCountData</a></span><span class="op">(</span><span class="st">"sosialFiktiv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">forceInner</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FALSE"</span>, <span class="st">"z4$ant &lt; 10"</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span>  <span class="kw">for</span> <span class="op">(</span><span class="va">zeroCandidates</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span>    <span class="kw">for</span> <span class="op">(</span><span class="va">maxRound</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">RoundViaDummy</span><span class="op">(</span><span class="va">z4</span>, <span class="st">"ant"</span>, formula <span class="op">=</span> <span class="va">mf</span>, maxRound <span class="op">=</span> <span class="va">maxRound</span>, </span></span>
<span class="r-in"><span>                         zeroCandidates <span class="op">=</span> <span class="va">zeroCandidates</span>, </span></span>
<span class="r-in"><span>                         forceInner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">forceInner</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">change</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span>, <span class="st">"original"</span><span class="op">]</span> <span class="op">!=</span> <span class="va">a</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span>, <span class="st">"rounded"</span><span class="op">]</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n\n---------------------------------------------------\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"      maxRound:"</span>, <span class="va">maxRound</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"zeroCandidates:"</span>, <span class="va">zeroCandidates</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"    forceInner:"</span>, <span class="va">forceInner</span>, <span class="st">"\n\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span>original <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span><span class="va">change</span>, <span class="st">"original"</span><span class="op">]</span>, rounded <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">yInner</span><span class="op">[</span><span class="va">change</span>, <span class="st">"rounded"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"---------------------------------------------------\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Johan Heldal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

